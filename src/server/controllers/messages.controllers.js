///////////////////////////////////////////////////////////////////////////////////////////
import MessageService from '../../app/message.service.js'
import HttpError from './errorHandler.js'
///////////////////////////////////////////////////////////////////////////////////////////
const pushMessage = async ( req ,res ) => {

    const { body : { chat_id,text } } = req

    if(!chat_id)throw new HttpError(400,'Require chat_id')
    if(!text )throw new HttpError(400,'Require text')

    const result = await MessageService.pushMessage( chat_id,text )
    res.json( { messge:'OK' } )

}
///////////////////////////////////////////////////////////////////////////////////////////
const getAllMessages =  async ( req ,res ) => {

    const { query : { chat_id } } = req


    const result = await MessageService.getMessages()
    res.json( result )

}
///////////////////////////////////////////////////////////////////////////////////////////
export default { pushMessage, getAllMessages  }
///////////////////////////////////////////////////////////////////////////////////////////